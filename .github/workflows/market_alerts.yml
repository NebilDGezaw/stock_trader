name: Market Alerts

on:
  # â”€â”€ Scheduled sessions (all times UTC) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  schedule:
    # LONDON OPEN: 08:00 UTC = 02:00 AM CT (Mon-Fri)
    - cron: "0 8 * * 1-5"

    # LONDON/NY OVERLAP: 13:00 UTC = 07:00 AM CT (Mon-Fri)
    - cron: "0 13 * * 1-5"

    # NY OPEN: 14:30 UTC = 08:30 AM CT (Mon-Fri)
    - cron: "30 14 * * 1-5"

    # NY MID-SESSION: 18:00 UTC = 12:00 PM CT (Mon-Fri)
    - cron: "0 18 * * 1-5"

    # NY CLOSE: 21:00 UTC = 03:00 PM CT (Mon-Fri)
    - cron: "0 21 * * 1-5"

    # ASIAN SESSION (crypto only): 01:00 UTC = 07:00 PM CT (Daily)
    - cron: "0 1 * * *"

  # â”€â”€ Manual trigger â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  workflow_dispatch:
    inputs:
      scan_type:
        description: "What to scan"
        required: false
        default: "all"
        type: choice
        options:
          - stocks_private
          - london_group
          - overlap_group
          - ny_group
          - ny_mid_stocks
          - ny_close_stocks
          - crypto_asian
          - all

jobs:
  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  #  PRIVATE DM: Stocks + Leveraged â†’ NY Open (08:30 AM CT)
  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  stocks-ny-open:
    runs-on: ubuntu-latest
    timeout-minutes: 10
    if: >-
      github.event.schedule == '30 14 * * 1-5' ||
      github.event.inputs.scan_type == 'stocks_private' ||
      github.event.inputs.scan_type == 'all'

    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-python@v5
        with:
          python-version: "3.12"
          cache: "pip"
      - run: pip install yfinance pandas numpy

      - name: "ğŸ›ï¸ Stocks â†’ Private DM (NY Open)"
        env:
          TELEGRAM_BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          TELEGRAM_CHAT_ID: ${{ secrets.TELEGRAM_CHAT_ID }}
        run: >-
          python -m alerts.telegram_bot
          --tickers MSTU MSTR MSTZ TSLL SPY AAPL MSFT TSLA GOOGL NVDA META
          --stock-mode
          --always-report MSTU MSTR MSTZ TSLL
          --label "ğŸ›ï¸ US Stocks â€” NY Open (8:30 AM CT)"
          --interval 1d --period 6mo

  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  #  PRIVATE DM: Stocks Mid-Session â†’ 12:00 PM CT
  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  stocks-ny-mid:
    runs-on: ubuntu-latest
    timeout-minutes: 10
    if: >-
      github.event.schedule == '0 18 * * 1-5' ||
      github.event.inputs.scan_type == 'ny_mid_stocks' ||
      github.event.inputs.scan_type == 'all'

    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-python@v5
        with:
          python-version: "3.12"
          cache: "pip"
      - run: pip install yfinance pandas numpy

      - name: "ğŸ›ï¸ Stocks â†’ Private DM (Mid-Session)"
        env:
          TELEGRAM_BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          TELEGRAM_CHAT_ID: ${{ secrets.TELEGRAM_CHAT_ID }}
        run: >-
          python -m alerts.telegram_bot
          --tickers MSTU MSTR MSTZ TSLL SPY AAPL MSFT TSLA GOOGL NVDA META
          --stock-mode
          --always-report MSTU MSTR MSTZ TSLL
          --label "ğŸ›ï¸ US Stocks â€” Mid-Session (12:00 PM CT)"
          --interval 1d --period 6mo

  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  #  PRIVATE DM: Stocks Close Summary â†’ 3:00 PM CT
  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  stocks-ny-close:
    runs-on: ubuntu-latest
    timeout-minutes: 10
    if: >-
      github.event.schedule == '0 21 * * 1-5' ||
      github.event.inputs.scan_type == 'ny_close_stocks' ||
      github.event.inputs.scan_type == 'all'

    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-python@v5
        with:
          python-version: "3.12"
          cache: "pip"
      - run: pip install yfinance pandas numpy

      - name: "ğŸ›ï¸ Stocks â†’ Private DM (Close)"
        env:
          TELEGRAM_BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          TELEGRAM_CHAT_ID: ${{ secrets.TELEGRAM_CHAT_ID }}
        run: >-
          python -m alerts.telegram_bot
          --tickers MSTU MSTR MSTZ TSLL SPY AAPL MSFT TSLA GOOGL NVDA META
          --stock-mode
          --always-report MSTU MSTR MSTZ TSLL
          --label "ğŸ›ï¸ US Stocks â€” Close Summary (3:00 PM CT)"
          --interval 1d --period 6mo

  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  #  GROUP: London Open â†’ 2:00 AM CT
  #  Forex + Gold & Silver
  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  london-group:
    runs-on: ubuntu-latest
    timeout-minutes: 10
    if: >-
      github.event.schedule == '0 8 * * 1-5' ||
      github.event.inputs.scan_type == 'london_group' ||
      github.event.inputs.scan_type == 'all'

    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-python@v5
        with:
          python-version: "3.12"
          cache: "pip"
      - run: pip install yfinance pandas numpy

      - name: "ğŸ‡¬ğŸ‡§ London Open â†’ Group"
        env:
          TELEGRAM_BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          TELEGRAM_CHAT_ID: ${{ secrets.TELEGRAM_GROUP_CHAT_ID }}
        run: >-
          python -m alerts.telegram_bot
          --tickers EURUSD=X GBPUSD=X EURGBP=X GBPJPY=X USDCHF=X GC=F SI=F
          --label "ğŸ‡¬ğŸ‡§ London Open â€” Forex & Metals (2:00 AM CT)"

  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  #  GROUP: London/NY Overlap â†’ 7:00 AM CT
  #  Forex + Crypto + Metals (highest volume window)
  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  overlap-group:
    runs-on: ubuntu-latest
    timeout-minutes: 10
    if: >-
      github.event.schedule == '0 13 * * 1-5' ||
      github.event.inputs.scan_type == 'overlap_group' ||
      github.event.inputs.scan_type == 'all'

    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-python@v5
        with:
          python-version: "3.12"
          cache: "pip"
      - run: pip install yfinance pandas numpy

      - name: "ğŸ”¥ London/NY Overlap â†’ Group"
        env:
          TELEGRAM_BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          TELEGRAM_CHAT_ID: ${{ secrets.TELEGRAM_GROUP_CHAT_ID }}
        run: >-
          python -m alerts.telegram_bot
          --tickers EURUSD=X GBPUSD=X USDJPY=X GC=F SI=F BTC-USD ETH-USD SOL-USD
          --label "ğŸ”¥ London/NY Overlap â€” Peak Volume (7:00 AM CT)"

  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  #  GROUP: NY Session â†’ 8:30 AM CT
  #  Crypto + Metals + NY Forex
  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  ny-group:
    runs-on: ubuntu-latest
    timeout-minutes: 10
    if: >-
      github.event.schedule == '30 14 * * 1-5' ||
      github.event.inputs.scan_type == 'ny_group' ||
      github.event.inputs.scan_type == 'all'

    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-python@v5
        with:
          python-version: "3.12"
          cache: "pip"
      - run: pip install yfinance pandas numpy

      - name: "ğŸ‡ºğŸ‡¸ NY Session â†’ Group"
        env:
          TELEGRAM_BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          TELEGRAM_CHAT_ID: ${{ secrets.TELEGRAM_GROUP_CHAT_ID }}
        run: >-
          python -m alerts.telegram_bot
          --tickers GC=F SI=F BTC-USD ETH-USD SOL-USD XRP-USD BNB-USD USDJPY=X USDCAD=X GBPUSD=X
          --label "ğŸ‡ºğŸ‡¸ NY Session â€” Crypto, Metals & Forex (8:30 AM CT)"

  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  #  GROUP: Asian Session (crypto) â†’ 7:00 PM CT DAILY
  #  Crypto runs 24/7 â€” catch Asian market activity
  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  crypto-asian:
    runs-on: ubuntu-latest
    timeout-minutes: 10
    if: >-
      github.event.schedule == '0 1 * * *' ||
      github.event.inputs.scan_type == 'crypto_asian' ||
      github.event.inputs.scan_type == 'all'

    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-python@v5
        with:
          python-version: "3.12"
          cache: "pip"
      - run: pip install yfinance pandas numpy

      - name: "ğŸŒ Asian Session (Crypto) â†’ Group"
        env:
          TELEGRAM_BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          TELEGRAM_CHAT_ID: ${{ secrets.TELEGRAM_GROUP_CHAT_ID }}
        run: >-
          python -m alerts.telegram_bot
          --tickers BTC-USD ETH-USD SOL-USD XRP-USD BNB-USD
          --label "ğŸŒ Asian Session â€” Crypto (7:00 PM CT)"
